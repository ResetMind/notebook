{% extends "base.html" %}

{% block content %}
<h1>{{title}}</h1>
<form action="" method="post" novalidate>
    {{ form.hidden_tag() }}
    <p>
        {{ form.header(size=32) }}<br>
        {% for error in form.header.errors %}
    <p class="error_margin">
        <span>{{ error }}</span>
        {% endfor %}
    </p>
    <p>
        {{ form.body(size=32) }}<br>
        {% for error in form.body.errors %}
    <p class="error_margin">
        <span>{{ error }}</span>
        {% endfor %}
    </p>
    <p>{{ form.submit() }}
        {{ LanguageForm.firstLang() }}
        {{ LanguageForm.secondLang() }}
        {{ LanguageForm.submit2() }}</p>
    <script>
        function translate() {
            sourceLang = $("#firstLang").val();
            destLang = $("#secondLang").val();
            $.post('/translate', {
                text: $('#body').text(),
                source_language: sourceLang,
                dest_language: destLang
            }).done(function(response) {
                $('#body').text(response['text'])
            }).fail(function() {
                $('#body').text("{{ ('Error: Could not contact server.') }}");
            });
        }
    </script>
    <a href="javascript:translate();">123333</a>
</form>
{% endblock %}